<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Staggered List & Shared Element Transitions</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(180deg, #1a1a2e 0%, #0f0f1a 100%);
            min-height: 100vh;
            padding: 40px 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            color: #fff;
            font-size: 28px;
            margin-bottom: 8px;
        }

        .header p {
            color: rgba(255,255,255,0.5);
            font-size: 14px;
        }

        /* Phone Frame */
        .demo-section {
            display: flex;
            gap: 60px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 40px;
        }

        .demo-item {
            text-align: center;
        }

        .demo-label {
            color: rgba(255,255,255,0.6);
            font-size: 13px;
            margin-bottom: 16px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .phone-frame {
            width: 375px;
            height: 700px;
            background: #0a0a0f;
            border-radius: 40px;
            overflow: hidden;
            position: relative;
            border: 3px solid #333;
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
        }

        /* Feed Screen */
        .feed-screen {
            height: 100%;
            padding: 60px 16px 20px;
            overflow-y: auto;
        }

        .feed-screen::-webkit-scrollbar {
            display: none;
        }

        .feed-header {
            margin-bottom: 20px;
        }

        .feed-title {
            font-size: 24px;
            font-weight: 800;
            color: #fff;
        }

        /* Event Cards */
        .event-card {
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            margin-bottom: 16px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            opacity: 0;
            transform: translateY(30px);
        }

        .event-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .event-card.animate-in {
            animation: cardSlideIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        @keyframes cardSlideIn {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .card-image {
            width: 100%;
            height: 140px;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .event-card:hover .card-image {
            transform: scale(1.02);
        }

        .card-content {
            padding: 14px;
        }

        .card-title {
            font-size: 16px;
            font-weight: 700;
            color: #fff;
            margin-bottom: 8px;
        }

        .card-meta {
            display: flex;
            gap: 12px;
            font-size: 12px;
            color: rgba(255,255,255,0.5);
        }

        .card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 14px;
            border-top: 1px solid rgba(255,255,255,0.08);
        }

        .attendees {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .avatar-stack {
            display: flex;
        }

        .avatar {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border: 2px solid #0a0a0f;
            margin-right: -8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
        }

        .attendee-count {
            font-size: 12px;
            color: rgba(255,255,255,0.5);
        }

        .rsvp-btn {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: #fff;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
        }

        /* Detail Modal Overlay */
        .detail-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            z-index: 100;
        }

        .detail-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        /* Detail Card (Shared Element) */
        .detail-card {
            position: absolute;
            background: #0a0a0f;
            border-radius: 20px;
            overflow: hidden;
            z-index: 101;
            transition: all 0.4s cubic-bezier(0.34, 1.2, 0.64, 1);
        }

        .detail-card .detail-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .detail-card .detail-content {
            padding: 20px;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s ease 0.2s;
        }

        .detail-card.expanded .detail-content {
            opacity: 1;
            transform: translateY(0);
        }

        .detail-title {
            font-size: 22px;
            font-weight: 800;
            color: #fff;
            margin-bottom: 12px;
        }

        .detail-meta {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 16px;
        }

        .detail-meta-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
            color: rgba(255,255,255,0.7);
        }

        .detail-description {
            font-size: 14px;
            line-height: 1.6;
            color: rgba(255,255,255,0.6);
            margin-bottom: 20px;
        }

        .detail-actions {
            display: flex;
            gap: 12px;
        }

        .detail-btn {
            flex: 1;
            padding: 14px;
            border-radius: 14px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            border: none;
        }

        .detail-btn.primary {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: #fff;
        }

        .detail-btn.secondary {
            background: rgba(255,255,255,0.1);
            color: #fff;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .close-btn {
            position: absolute;
            top: 16px;
            right: 16px;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(10px);
            border: none;
            color: #fff;
            font-size: 20px;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s ease 0.3s;
            z-index: 10;
        }

        .detail-card.expanded .close-btn {
            opacity: 1;
        }

        /* Controls */
        .controls {
            display: flex;
            gap: 16px;
            justify-content: center;
            margin-top: 24px;
        }

        .control-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: #fff;
            border: none;
            padding: 14px 28px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .control-btn.secondary {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
        }

        /* Instructions */
        .instructions {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 16px;
            padding: 24px;
            margin-top: 40px;
        }

        .instructions h3 {
            color: #fff;
            font-size: 16px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .instructions ul {
            list-style: none;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .instructions li {
            color: rgba(255,255,255,0.7);
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .instructions li::before {
            content: '‚Üí';
            color: #667eea;
        }

        /* Timing indicator */
        .timing-display {
            position: absolute;
            bottom: 100px;
            left: 16px;
            right: 16px;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 12px 16px;
            display: none;
        }

        .timing-display.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .timing-label {
            font-size: 11px;
            color: rgba(255,255,255,0.5);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }

        .timing-bars {
            display: flex;
            gap: 6px;
        }

        .timing-bar {
            height: 4px;
            border-radius: 2px;
            background: rgba(255,255,255,0.2);
            flex: 1;
            overflow: hidden;
        }

        .timing-bar-fill {
            height: 100%;
            width: 0;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            border-radius: 2px;
        }

        .timing-bar.animate .timing-bar-fill {
            animation: fillBar 0.5s ease forwards;
        }

        @keyframes fillBar {
            to { width: 100%; }
        }

        /* Second Phone - Side by Side Comparison */
        .comparison-section {
            margin-top: 60px;
            padding-top: 40px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .comparison-header {
            text-align: center;
            margin-bottom: 32px;
        }

        .comparison-header h2 {
            color: #fff;
            font-size: 20px;
            margin-bottom: 8px;
        }

        .comparison-header p {
            color: rgba(255,255,255,0.5);
            font-size: 13px;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            max-width: 700px;
            margin: 0 auto;
        }

        .comparison-item h4 {
            color: rgba(255,255,255,0.6);
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 16px;
            text-align: center;
        }

        .mini-phone {
            width: 100%;
            max-width: 280px;
            height: 500px;
            background: #0a0a0f;
            border-radius: 30px;
            overflow: hidden;
            border: 2px solid #333;
            margin: 0 auto;
        }

        .mini-feed {
            padding: 40px 12px 12px;
            height: 100%;
            overflow: hidden;
        }

        .mini-card {
            background: rgba(255,255,255,0.06);
            border-radius: 14px;
            margin-bottom: 10px;
            overflow: hidden;
        }

        .mini-card-img {
            height: 80px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .mini-card-content {
            padding: 10px;
        }

        .mini-card-title {
            font-size: 12px;
            font-weight: 600;
            color: #fff;
            margin-bottom: 4px;
        }

        .mini-card-meta {
            font-size: 10px;
            color: rgba(255,255,255,0.4);
        }

        /* Without animation */
        .no-animation .mini-card {
            opacity: 1;
        }

        /* With animation */
        .with-animation .mini-card {
            opacity: 0;
            transform: translateY(20px);
        }

        .with-animation.playing .mini-card {
            animation: miniCardIn 0.4s cubic-bezier(0.34, 1.4, 0.64, 1) forwards;
        }

        .with-animation.playing .mini-card:nth-child(1) { animation-delay: 0ms; }
        .with-animation.playing .mini-card:nth-child(2) { animation-delay: 80ms; }
        .with-animation.playing .mini-card:nth-child(3) { animation-delay: 160ms; }
        .with-animation.playing .mini-card:nth-child(4) { animation-delay: 240ms; }

        @keyframes miniCardIn {
            from {
                opacity: 0;
                transform: translateY(20px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .replay-btn {
            display: block;
            margin: 16px auto 0;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: #fff;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 12px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Staggered List & Shared Element Transitions</h1>
            <p>Click on event cards to see the shared element transition. Use buttons to replay animations.</p>
        </div>

        <div class="demo-section">
            <div class="demo-item">
                <div class="demo-label">Interactive Demo</div>
                <div class="phone-frame" id="phone1">
                    <div class="feed-screen" id="feedScreen">
                        <div class="feed-header">
                            <div class="feed-title">Cruise Feed</div>
                        </div>

                        <div class="event-card" data-id="1" data-img="https://images.unsplash.com/photo-1514525253161-7a46d19cd819?w=400&h=300&fit=crop" data-title="Pool Party Vibes">
                            <img src="https://images.unsplash.com/photo-1514525253161-7a46d19cd819?w=400&h=300&fit=crop" class="card-image">
                            <div class="card-content">
                                <div class="card-title">Pool Party Vibes</div>
                                <div class="card-meta">
                                    <span>üìÖ Today 3PM</span>
                                    <span>üìç Deck 12</span>
                                </div>
                            </div>
                            <div class="card-footer">
                                <div class="attendees">
                                    <div class="avatar-stack">
                                        <div class="avatar">üòé</div>
                                        <div class="avatar">ü•≥</div>
                                        <div class="avatar">ü§©</div>
                                    </div>
                                    <span class="attendee-count">+24 going</span>
                                </div>
                                <button class="rsvp-btn">RSVP</button>
                            </div>
                        </div>

                        <div class="event-card" data-id="2" data-img="https://images.unsplash.com/photo-1542751371-adc38448a05e?w=400&h=300&fit=crop" data-title="Gaming Tournament">
                            <img src="https://images.unsplash.com/photo-1542751371-adc38448a05e?w=400&h=300&fit=crop" class="card-image">
                            <div class="card-content">
                                <div class="card-title">Gaming Tournament</div>
                                <div class="card-meta">
                                    <span>üìÖ Tomorrow 2PM</span>
                                    <span>üìç Game Lounge</span>
                                </div>
                            </div>
                            <div class="card-footer">
                                <div class="attendees">
                                    <div class="avatar-stack">
                                        <div class="avatar">üéÆ</div>
                                        <div class="avatar">üèÜ</div>
                                    </div>
                                    <span class="attendee-count">+12 going</span>
                                </div>
                                <button class="rsvp-btn">RSVP</button>
                            </div>
                        </div>

                        <div class="event-card" data-id="3" data-img="https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?w=400&h=300&fit=crop" data-title="Movie Night: Barbie">
                            <img src="https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?w=400&h=300&fit=crop" class="card-image">
                            <div class="card-content">
                                <div class="card-title">Movie Night: Barbie</div>
                                <div class="card-meta">
                                    <span>üìÖ Tonight 8PM</span>
                                    <span>üìç Theater</span>
                                </div>
                            </div>
                            <div class="card-footer">
                                <div class="attendees">
                                    <div class="avatar-stack">
                                        <div class="avatar">üé¨</div>
                                        <div class="avatar">üçø</div>
                                    </div>
                                    <span class="attendee-count">+8 going</span>
                                </div>
                                <button class="rsvp-btn">RSVP</button>
                            </div>
                        </div>

                        <div class="event-card" data-id="4" data-img="https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=400&h=300&fit=crop" data-title="Sushi Making Class">
                            <img src="https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=400&h=300&fit=crop" class="card-image">
                            <div class="card-content">
                                <div class="card-title">Sushi Making Class</div>
                                <div class="card-meta">
                                    <span>üìÖ Wed 11AM</span>
                                    <span>üìç Culinary Center</span>
                                </div>
                            </div>
                            <div class="card-footer">
                                <div class="attendees">
                                    <div class="avatar-stack">
                                        <div class="avatar">üç£</div>
                                        <div class="avatar">üë®‚Äçüç≥</div>
                                    </div>
                                    <span class="attendee-count">+6 going</span>
                                </div>
                                <button class="rsvp-btn">RSVP</button>
                            </div>
                        </div>
                    </div>

                    <!-- Timing Display -->
                    <div class="timing-display" id="timingDisplay">
                        <div class="timing-label">Stagger Timing (80ms each)</div>
                        <div class="timing-bars">
                            <div class="timing-bar"><div class="timing-bar-fill"></div></div>
                            <div class="timing-bar"><div class="timing-bar-fill"></div></div>
                            <div class="timing-bar"><div class="timing-bar-fill"></div></div>
                            <div class="timing-bar"><div class="timing-bar-fill"></div></div>
                        </div>
                    </div>

                    <!-- Detail Overlay -->
                    <div class="detail-overlay" id="detailOverlay"></div>

                    <!-- Detail Card -->
                    <div class="detail-card" id="detailCard">
                        <button class="close-btn" id="closeBtn">√ó</button>
                        <img src="" class="detail-image" id="detailImage">
                        <div class="detail-content">
                            <div class="detail-title" id="detailTitle">Event Title</div>
                            <div class="detail-meta">
                                <div class="detail-meta-item">
                                    <span>üìÖ</span>
                                    <span>Today at 3:00 PM</span>
                                </div>
                                <div class="detail-meta-item">
                                    <span>üìç</span>
                                    <span>Deck 12 - Main Pool</span>
                                </div>
                                <div class="detail-meta-item">
                                    <span>üë•</span>
                                    <span>24 people going</span>
                                </div>
                            </div>
                            <div class="detail-description">
                                DJ playing summer hits, free smoothies, and pool games! Come hang out with everyone on the cruise. Bring your swimsuit!
                            </div>
                            <div class="detail-actions">
                                <button class="detail-btn secondary">Interested</button>
                                <button class="detail-btn primary">Going</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="controls">
                    <button class="control-btn" onclick="replayStagger()">Replay Stagger Animation</button>
                </div>
            </div>
        </div>

        <!-- Side by Side Comparison -->
        <div class="comparison-section">
            <div class="comparison-header">
                <h2>Before vs After Comparison</h2>
                <p>See the difference staggered animations make</p>
            </div>

            <div class="comparison-grid">
                <div class="comparison-item">
                    <h4>‚ùå Without Stagger (All at once)</h4>
                    <div class="mini-phone">
                        <div class="mini-feed no-animation" id="noAnimFeed">
                            <div class="mini-card">
                                <div class="mini-card-img"></div>
                                <div class="mini-card-content">
                                    <div class="mini-card-title">Pool Party</div>
                                    <div class="mini-card-meta">Today 3PM</div>
                                </div>
                            </div>
                            <div class="mini-card">
                                <div class="mini-card-img" style="background: linear-gradient(135deg, #f59e0b, #d97706);"></div>
                                <div class="mini-card-content">
                                    <div class="mini-card-title">Gaming Night</div>
                                    <div class="mini-card-meta">Tomorrow 2PM</div>
                                </div>
                            </div>
                            <div class="mini-card">
                                <div class="mini-card-img" style="background: linear-gradient(135deg, #3b82f6, #2563eb);"></div>
                                <div class="mini-card-content">
                                    <div class="mini-card-title">Movie Night</div>
                                    <div class="mini-card-meta">Tonight 8PM</div>
                                </div>
                            </div>
                            <div class="mini-card">
                                <div class="mini-card-img" style="background: linear-gradient(135deg, #22c55e, #16a34a);"></div>
                                <div class="mini-card-content">
                                    <div class="mini-card-title">Yoga Class</div>
                                    <div class="mini-card-meta">Wed 7AM</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button class="replay-btn" onclick="replayNoAnim()">Replay (Instant)</button>
                </div>

                <div class="comparison-item">
                    <h4>‚úì With Stagger (80ms delay)</h4>
                    <div class="mini-phone">
                        <div class="mini-feed with-animation" id="withAnimFeed">
                            <div class="mini-card">
                                <div class="mini-card-img"></div>
                                <div class="mini-card-content">
                                    <div class="mini-card-title">Pool Party</div>
                                    <div class="mini-card-meta">Today 3PM</div>
                                </div>
                            </div>
                            <div class="mini-card">
                                <div class="mini-card-img" style="background: linear-gradient(135deg, #f59e0b, #d97706);"></div>
                                <div class="mini-card-content">
                                    <div class="mini-card-title">Gaming Night</div>
                                    <div class="mini-card-meta">Tomorrow 2PM</div>
                                </div>
                            </div>
                            <div class="mini-card">
                                <div class="mini-card-img" style="background: linear-gradient(135deg, #3b82f6, #2563eb);"></div>
                                <div class="mini-card-content">
                                    <div class="mini-card-title">Movie Night</div>
                                    <div class="mini-card-meta">Tonight 8PM</div>
                                </div>
                            </div>
                            <div class="mini-card">
                                <div class="mini-card-img" style="background: linear-gradient(135deg, #22c55e, #16a34a);"></div>
                                <div class="mini-card-content">
                                    <div class="mini-card-title">Yoga Class</div>
                                    <div class="mini-card-meta">Wed 7AM</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button class="replay-btn" onclick="replayWithAnim()">Replay (Staggered)</button>
                </div>
            </div>
        </div>

        <div class="instructions">
            <h3>üí° How It Works</h3>
            <ul>
                <li><strong>Stagger:</strong> Each card animates in with 80ms delay after the previous</li>
                <li><strong>Spring physics:</strong> Cards overshoot slightly then settle (cubic-bezier)</li>
                <li><strong>Shared element:</strong> Card image morphs into detail view position</li>
                <li><strong>Layered animation:</strong> Detail content fades in after image settles</li>
                <li><strong>Click any card</strong> to see the shared element transition</li>
                <li><strong>Implementation:</strong> Use react-native-reanimated entering prop</li>
            </ul>
        </div>
    </div>

    <script>
        const cards = document.querySelectorAll('.event-card');
        const detailOverlay = document.getElementById('detailOverlay');
        const detailCard = document.getElementById('detailCard');
        const detailImage = document.getElementById('detailImage');
        const detailTitle = document.getElementById('detailTitle');
        const closeBtn = document.getElementById('closeBtn');
        const timingDisplay = document.getElementById('timingDisplay');
        const timingBars = document.querySelectorAll('.timing-bar');

        let isOpen = false;
        let originalRect = null;

        // Stagger animation on load
        function animateCardsIn() {
            cards.forEach((card, index) => {
                card.classList.remove('animate-in');
                card.style.opacity = '0';
                card.style.transform = 'translateY(30px)';

                setTimeout(() => {
                    card.classList.add('animate-in');
                }, index * 80);
            });

            // Show timing display
            timingDisplay.classList.add('show');
            timingBars.forEach((bar, index) => {
                bar.classList.remove('animate');
                setTimeout(() => {
                    bar.classList.add('animate');
                }, index * 80);
            });

            setTimeout(() => {
                timingDisplay.classList.remove('show');
            }, 1500);
        }

        // Initial animation
        setTimeout(animateCardsIn, 500);

        // Replay stagger
        function replayStagger() {
            animateCardsIn();
        }

        // Card click - Shared Element Transition
        cards.forEach(card => {
            card.addEventListener('click', (e) => {
                if (e.target.classList.contains('rsvp-btn')) return;
                if (isOpen) return;

                isOpen = true;
                const rect = card.getBoundingClientRect();
                const phoneRect = document.getElementById('phone1').getBoundingClientRect();

                // Get card data
                const imgSrc = card.dataset.img;
                const title = card.dataset.title;

                detailImage.src = imgSrc;
                detailTitle.textContent = title;

                // Position detail card at original card position
                const relativeTop = rect.top - phoneRect.top;
                const relativeLeft = rect.left - phoneRect.left;

                detailCard.style.top = relativeTop + 'px';
                detailCard.style.left = relativeLeft + 'px';
                detailCard.style.width = rect.width + 'px';
                detailCard.style.height = rect.height + 'px';
                detailCard.style.opacity = '1';
                detailCard.style.borderRadius = '20px';

                // Show overlay
                detailOverlay.classList.add('active');

                // Animate to expanded position
                requestAnimationFrame(() => {
                    requestAnimationFrame(() => {
                        detailCard.style.top = '40px';
                        detailCard.style.left = '16px';
                        detailCard.style.width = 'calc(100% - 32px)';
                        detailCard.style.height = 'auto';
                        detailCard.style.borderRadius = '24px';
                        detailCard.classList.add('expanded');
                    });
                });

                originalRect = { top: relativeTop, left: relativeLeft, width: rect.width, height: rect.height };
            });
        });

        // Close detail
        function closeDetail() {
            if (!isOpen) return;

            detailCard.classList.remove('expanded');
            detailCard.style.top = originalRect.top + 'px';
            detailCard.style.left = originalRect.left + 'px';
            detailCard.style.width = originalRect.width + 'px';
            detailCard.style.height = originalRect.height + 'px';

            detailOverlay.classList.remove('active');

            setTimeout(() => {
                detailCard.style.opacity = '0';
                isOpen = false;
            }, 400);
        }

        closeBtn.addEventListener('click', closeDetail);
        detailOverlay.addEventListener('click', closeDetail);

        // Comparison animations
        function replayNoAnim() {
            const feed = document.getElementById('noAnimFeed');
            const cards = feed.querySelectorAll('.mini-card');
            cards.forEach(card => {
                card.style.opacity = '0';
            });
            setTimeout(() => {
                cards.forEach(card => {
                    card.style.opacity = '1';
                });
            }, 100);
        }

        function replayWithAnim() {
            const feed = document.getElementById('withAnimFeed');
            feed.classList.remove('playing');
            const cards = feed.querySelectorAll('.mini-card');
            cards.forEach(card => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
            });
            setTimeout(() => {
                feed.classList.add('playing');
            }, 100);
        }

        // Initial comparison animation
        setTimeout(() => {
            document.getElementById('withAnimFeed').classList.add('playing');
        }, 1000);
    </script>
</body>
</html>
